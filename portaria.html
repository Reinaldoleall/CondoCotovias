<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Portaria - Sistema de Encomendas</title>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="css/portaria.css">
  
    
    <meta name="theme-color" content="#6750A4">
    <meta name="description" content="Sistema de gerenciamento de encomendas para portaria de condomínios.">
    
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
    <script>
        (function() {
            // INICIE O EMAILJS COM SEU USER ID AQUI
            emailjs.init("u4fUcSd9Yi3exmOiv"); // Substitua pelo seu User ID do EmailJS
        })();
    </script>
  
</head>
<body>
    <div id="loadingIndicator" class="md-loading-overlay">
        <div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>
    </div>

    <header class="header-bar">
        <div class="header-welcome">
            <h5>Painel da Portaria</h5>
            <p>Bem-vindo, <strong id="porteiroNome">Carregando...</strong></p>
        </div>
        <div class="header-actions">
            <a class="waves-effect waves-light btn-flat tooltipped" data-position="bottom" data-tooltip="Modo Escuro/Claro" id="theme-toggle-btn"><i class="material-icons-round">brightness_6</i></a>
            <a id="btnLogout" class="waves-effect waves-light btn red tooltipped" data-position="bottom" data-tooltip="Sair do sistema"><i class="material-icons-round left">exit_to_app</i>Sair</a>
        </div>
    </header>

    <main class="container">
        <section class="stats-dashboard">
            <div class="stat-card">
                <div id="statPendentes" class="stat-value">0</div>
                <div class="stat-label">Pendentes</div>
            </div>
            <div class="stat-card">
                <div id="statAguardando" class="stat-value">0</div>
                <div class="stat-label">Aguardando Confirmação</div>
            </div>
        </section>

        <div class="row">
            <div class="col s12 m5 l4">
                <div class="card">
                    <div class="card-content">
                        <span class="card-title"><i class="material-icons-round">add_box</i>Registrar</span>
                        <div class="row">
                            <div class="input-field col s6"><input id="blocoEncomenda" type="text" required><label for="blocoEncomenda">Bloco</label></div>
                            <div class="input-field col s6"><input id="apartamentoEncomenda" type="text" required><label for="apartamentoEncomenda">Apto</label></div>
                            <div class="input-field col s12"><input id="quantidadeEncomenda" type="number" min="1" value="1" required><label for="quantidadeEncomenda">Quantidade</label></div>
                            <div class="input-field col s12"><textarea id="descricaoEncomenda" class="materialize-textarea"></textarea><label for="descricaoEncomenda">Descrição (opcional)</label></div>
                            <div class="col s12 center-align"><button id="btnRegistrarEncomenda" class="btn waves-effect waves-light"><i class="material-icons-round left">send</i>Registrar</button></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col s12 m7 l8">
                <div class="card">
                    <div class="card-content">
                         <div class="input-field">
                            <i class="material-icons prefix">search</i>
                            <input type="text" id="searchInput" placeholder="Buscar por Bloco, Apto, ID ou Descrição...">
                        </div>
                        <ul class="tabs">
                            <li class="tab col s6"><a class="active" href="#pendentesTab">Pendentes e Aguardando</a></li>
                            <li class="tab col s6"><a href="#finalizadasTab">Entregas Recentes</a></li>
                        </ul>
                        <div id="pendentesTab" class="col s12">
                            <ul class="collection" id="listaEncomendasPendentes"></ul>
                        </div>
                        <div id="finalizadasTab" class="col s12">
                            <ul class="collection" id="listaEncomendasFinalizadas"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="modalEntrega" class="modal"><div class="modal-content"><h4>Registrar Entrega</h4><div class="input-field"><i class="material-icons-round prefix">person</i><input id="nomeRetirante" type="text" required><label for="nomeRetirante">Nome de quem está retirando</label></div></div><div class="modal-footer"><a href="#!" class="modal-close waves-effect btn-flat">Cancelar</a><a href="#!" class="btn waves-effect" id="btnConfirmarEntrega">Enviar para Confirmação</a></div></div>
    <div id="modalDetalhes" class="modal"><div class="modal-content"><h4 id="modalDetalhesTitle">Detalhes da Encomenda</h4><div class="row"><div class="col s12 m6"><p><strong>Bloco/Apto:</strong> <span id="detalhesBlocoApto"></span></p><p><strong>Data Recebimento:</strong> <span id="detalhesData"></span></p><p><strong>Registrado por:</strong> <span id="detalhesPorteiro"></span></p></div><div class="col s12 m6"><p><strong>Quantidade:</strong> <span id="detalhesQuantidade"></span></p><p><strong>Status:</strong> <span id="detalhesStatus" class="badge"></span></p><p><strong>Descrição:</strong> <span id="detalhesDescricao"></span></p></div></div><div id="detalhesRetiradaSection" style="display:none;"><hr><p><strong>Retirado por:</strong> <span id="detalhesRetiradoPor"></span></p><p><strong>Data da Retirada:</strong> <span id="detalhesDataRetirada"></span></p></div></div><div class="modal-footer"><a href="#!" class="modal-close waves-effect btn-flat">Fechar</a></div></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <script src= "js/portaria.js"></script>
</body>
</html>
